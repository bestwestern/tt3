function tildeltid0(){for(var t=!1,n=0;n<vistsol.tidmangeltildelinger.length;n++)vistsol.tidmangeltildelinger[n]!=undefined||(vistsol.tidmangeltildelinger[n]=0,t=!0);t&&($("#content").html(lavtablerowhtml(vistsol)),vistsol.udregncon(!0),vistsol.udregncon(!1))}function lavxml(){var y=new XMLSerializer,b=xmlDoc.getElementsByTagName("Instances")[0],p=xmlDoc.getElementsByTagName("SolutionGroups")[0],c=xmlDoc.createElement("SolutionGroup"),l,a,e,n,w,f,t,o,v,s,i,r,u,h;for(c.setAttribute("Id","Runessol"),l=xmlDoc.createElement("Solution"),l.setAttribute("Reference",xmlinstans),a=addnode("Events",l),e=0;e<antalevents;e++)for(n=events[e],e==50&&(w=4),f=0;f<n.duration;f++)if(n.preasigntime){if(f==0)for(t=addnode("Event",a),t.setAttribute("Reference",n.id),addnode("Duration",t,n.duration.toString()),o=addnode("Time",t),o.setAttribute("Reference",timer[n.preasigntime.index].id),s=addnode("Resources",t),i=0;i<n.eventresmangler.length;i++)r=vistsol.resmangeltildelinger[n.eventresmangler[i].index],r&&(u=addnode("Resource",s),u.setAttribute("Reference",resourcer[r].id),addnode("Role",u,n.eventresmangler[i].role))}else for(t=addnode("Event",a),t.setAttribute("Reference",n.id),addnode("Duration",t,"1"),o=addnode("Time",t),v=vistsol.tidmangeltildelinger[n.eventtidmangler[f].index],o.setAttribute("Reference",timer[v].id),s=addnode("Resources",t),i=f;i<n.eventresmangler.length;i+=n.duration)r=vistsol.resmangeltildelinger[n.eventresmangler[i].index],r&&(u=addnode("Resource",s),u.setAttribute("Reference",resourcer[r].id),addnode("Role",u,n.eventresmangler[i].role));h=xmlDoc.createElement("MetaData"),addnode("Contributor",h,"run@sdu.dk"),addnode("Date",h,(new Date).toDateString()),addnode("Description",h,"Speciale"),c.appendChild(h),c.appendChild(l),p.appendChild(c),window.open("data:text/xml,"+y.serializeToString(xmlDoc))}function addnode(n,t,i){var r=xmlDoc.createElement(n),u;return i&&(u=xmlDoc.createTextNode("ch"),u.nodeValue=i,r.appendChild(u)),t.appendChild(r),r}function choicemade(n,t,i){var f=i.getAttribute("data-eventindex"),s=i.getAttribute("data-durationindex"),h=i.getAttribute("data-tidmangelindex"),r,e,u,o;if(n)r=Number(i.options[i.selectedIndex].value),isNaN(r)&&(r=-1),vistsol.tildeltidtilevent(t,r);else{if(r=Number(i.options[i.selectedIndex].value),e=vistsol.resmangeltildelinger[t],u=h<0?h*-1-1:vistsol.tidmangeltildelinger[h],u!=null)if(h<0)for(o=0;o<events[f].duration;o++)e!==undefined&&vistsol.fratagresourcetileventtiltid(e,s,u+o,f),isNaN(r)||vistsol.tildelresourcetileventtiltid(r,s,u+o,f);else e!==undefined&&vistsol.fratagresourcetileventtiltid(e,s,u,f),isNaN(r)||vistsol.tildelresourcetileventtiltid(r,s,u,f);vistsol.resmangeltildelinger[t]=isNaN(r)?null:r}$("#content").html(lavtablerowhtml(vistsol)),vistsol.udregncon(!0),vistsol.udregncon(!1)}function assert(n,t){var i=document.getElementById("results"),r;i||(i=document.createElement("ul"),document.getElementsByTagName("body")[0].appendChild(i),i.setAttribute("id","results")),r=document.createElement("li"),r.className=n?"pass":"fail",r.appendChild(document.createTextNode(t)),i.appendChild(r)}function lavtablerowhtml(n){for(var s="<table><thead><tr><td>Event<\/td><td>Time<\/td><\/tr><\/thead>",k={},lt=events.length,d=" <option> Not chosen<\/option> ",t,g,i,c,u,ft,f,a,v,nt,tt,e,et,y,p,ht,l,h,ct,rt,w,b,ut,r=0,o=timer.length;r<o;r++)d+="<option value='"+timer[r].index+"'>"+timer[r].name+"<\/option>";for(d+="<\/select>",r=0;r<lt;r++)for(t=events[r],g=t.eventresmangler.length,i=0;i<t.duration;i++){if(c=t.name,u="",t.preasigntime){if(i==0){for(t.duration>1&&(c+=" ("+t.duration+")"),f=0,o=t.eventresourcer.length;f<o;f++)u+=t.eventresourcer[f].name+", ";s+=u.length>0?"<tr title='"+u.substr(0,u.length-2)+"'><td>":"<tr><td>",ft=timer[t.preasigntime.index+i],s+=c+"<\/td><td>Time:"+ft.name+"<\/td>"}}else{for(t.duration>1&&(c+=" ("+(i+1)+"/"+t.duration+")"),f=0,o=t.eventresourcer.length;f<o;f++)u+=t.eventresourcer[f].name+", ";s+=u.length>0?"<tr title='"+u.substr(0,u.length-2)+"'><td>":"<tr><td>",a=d,v=n.tidmangeltildelinger[t.eventtidmangler[i].index],v>-2&&(a=a.replace("'"+v+"'","'"+v+"' selected")),s+=c+"<\/td><td>Time:<select  data-eventindex="+t.index+"  data-durationindex="+i+"  data-tidmangelindex="+t.eventtidmangler[i].index+"   onchange='choicemade(true,"+t.eventtidmangler[i].index+",this)'>"+a+"<\/td>"}for(nt=i,tt=t.duration,t.preasigntime&&(i==0?tt=1:nt=g),e=nt;e<g;e=e+tt){if(et=t.eventresmangler[e].role,y=t.eventresmangler[e].resourcetype.id,k[y]===undefined){var ot=[],it="<option>Not chosen<\/option>",st=t.eventresmangler[e].resourcetype.resourcegroups;for(p=0,ht=st.length;p<ht;p++)for(l=st[p].resourcer,h=0,ct=l.length;h<ct;h++)ot.indexOf(l[h].index)==-1&&(rt=l[h].index,ot.push(rt),it+="<option value='"+rt+"'>"+l[h].name+"<\/option>");it+="<\/select>",k[y]=it}w=k[y],b=n.resmangeltildelinger[t.eventresmangler[e].index],b>-2&&(w=w.replace("'"+b+"'","'"+b+"' selected")),ut=t.eventtidmangler[i]!=undefined?t.eventtidmangler[i].index:-(t.preasigntime.index+i)-1,s+="<td> "+et+":<select data-eventindex="+t.index+"  data-durationindex="+i+"  data-tidmangelindex="+ut+" onchange='choicemade(false,"+t.eventresmangler[e].index+",this)'>>"+w+"<\/td>"}}return s+"<\/table>"}var timer,vistsol,tidsgrupper,resourcetyper,resourcegrupper,resourcer,eventgrupper,events,antalevents,antalresourcer,antaltider,hardconstraints,softconstraints,resmangler,tidmangler,counter=0,xmlDoc,xmlinstans;window.onload=function(){var n,i,t;if([][3]=[5],n=["DenmarkSmallSchool","test","NetherlandsKottenpark2009","ArtificialORLibrary-hdtt6","ArtificialSudoku4x4","AustraliaBGHS98","AustraliaSAHS96","BrazilInstance1","BrazilInstance4","DenmarkHasserisGymnasium2012","EnglandStPaul","GreeceHighSchool1","FinlandCollege","FinlandSecondarySchool","NetherlandsGEPRO","SouthAfricaLewitt2009","SpainSchool","ItalyInstance1"],i=0,i)for(t=0;t<n.length;t++)events=[],instans.readxml("XML/"+n[t]+".xml");instans.readxml("XML/"+n[6]+".xml"),vistsol=new solution.Sol,$("#content").html(lavtablerowhtml(vistsol))}