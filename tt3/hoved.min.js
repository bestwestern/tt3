function lavxml(){var y=new XMLSerializer,b=xmlDoc.getElementsByTagName("Instances")[0],p=xmlDoc.getElementsByTagName("SolutionGroups")[0],f=xmlDoc.createElement("SolutionGroup"),e,a,o,n,t,i,s,h,v,w,r,c,l,u;for(f.setAttribute("Id","Runessol"),e=xmlDoc.createElement("Solution"),e.setAttribute("Reference",xmlinstans),a=addnode("Events",e),o=0;o<antalevents;o++)for(n=events[o],t=0;t<n.duration;t++)for(i=addnode("Event",a),i.setAttribute("Reference",n.id),addnode("Duration",i,"1"),s=addnode("Time",i),n.preasigntime?s.setAttribute("Reference",timer[n.preasigntime.index+t].id):(h=vistsol.tidmangeltildelinger[n.eventtidmangler[t].index],h?s.setAttribute("Reference",timer[h].id):s.setAttribute("Reference",timer[0].id)),v=addnode("Resources",i),n.eventresmangler.length>1&&(w=4),r=t;r<n.eventresmangler.length;r+=n.duration)c=vistsol.resmangeltildelinger[n.eventresmangler[r].index],c&&(l=addnode("Resource",v),l.setAttribute("Reference",resourcer[c].id),addnode("Role",l,n.eventresmangler[r].role));u=xmlDoc.createElement("MetaData"),addnode("Contributor",u,"run@sdu.dk"),addnode("Date",u,(new Date).toDateString()),addnode("Description",u,"Speciale"),f.appendChild(u),f.appendChild(e),p.appendChild(f),window.open("data:text/xml,"+y.serializeToString(xmlDoc))}function addnode(n,t,i){var r=xmlDoc.createElement(n),u;return i&&(u=xmlDoc.createTextNode("ch"),u.nodeValue=i,r.appendChild(u)),t.appendChild(r),r}function choicemade(n,t,i){var o=i.getAttribute("data-eventindex"),s=i.getAttribute("data-durationindex"),f=i.getAttribute("data-tidmangelindex"),r,e,u;n?(r=Number(i.options[i.selectedIndex].value),isNaN(r)&&(r=-1),vistsol.tildeltidtilevent(t,r)):(r=Number(i.options[i.selectedIndex].value),e=vistsol.resmangeltildelinger[t],u=f<0?f*-1-1:vistsol.tidmangeltildelinger[f],u!=null&&(e!==undefined&&vistsol.fratagresourcetileventtiltid(e,s,u,o),isNaN(r)||vistsol.tildelresourcetileventtiltid(r,s,u,o)),vistsol.resmangeltildelinger[t]=isNaN(r)?null:r),$("#content").html(lavtablerowhtml(vistsol)),vistsol.udregncon(!0),vistsol.udregncon(!1)}function assert(n,t){var i=document.getElementById("results"),r;i||(i=document.createElement("ul"),document.getElementsByTagName("body")[0].appendChild(i),i.setAttribute("id","results")),r=document.createElement("li"),r.className=n?"pass":"fail",r.appendChild(document.createTextNode(t)),i.appendChild(r)}function lavtablerowhtml(n){for(var e="<table><thead><tr><td>Event<\/td><td>Time<\/td><\/tr><\/thead>",k={},ht=events.length,d=" <option> Not chosen<\/option> ",t,it,i,c,s,l,rt,a,v,u,ut,y,p,ot,h,f,st,nt,w,b,tt,r=0,o=timer.length;r<o;r++)d+="<option value='"+timer[r].index+"'>"+timer[r].name+"<\/option>";for(d+="<\/select>",r=0;r<ht;r++)for(t=events[r],it=t.eventresmangler.length,i=0;i<t.duration;i++){for(c=t.name,s="",t.duration>1&&(c+=" ("+(i+1)+"/"+t.duration+")"),l=0,o=t.eventresourcer.length;l<o;l++)s+=t.eventresourcer[l].name+", ";for(e+=s.length>0?"<tr title='"+s.substr(0,s.length-2)+"'><td>":"<tr><td>",t.preasigntime?(rt=timer[t.preasigntime.index+i],e+=c+"<\/td><td>Time:"+rt.name+"<\/td>"):(a=d,v=n.tidmangeltildelinger[t.eventtidmangler[i].index],v>-2&&(a=a.replace("'"+v+"'","'"+v+"' selected")),e+=c+"<\/td><td>Time:<select  data-eventindex="+t.index+"  data-durationindex="+i+"  data-tidmangelindex="+t.eventtidmangler[i].index+"   onchange='choicemade(true,"+t.eventtidmangler[i].index+",this)'>"+a+"<\/td>"),u=i;u<it;u=u+t.duration){if(ut=t.eventresmangler[u].role,y=t.eventresmangler[u].resourcetype.id,k[y]===undefined){var ft=[],g="<option>Not chosen<\/option>",et=t.eventresmangler[u].resourcetype.resourcegroups;for(p=0,ot=et.length;p<ot;p++)for(h=et[p].resourcer,f=0,st=h.length;f<st;f++)ft.indexOf(h[f].index)==-1&&(nt=h[f].index,ft.push(nt),g+="<option value='"+nt+"'>"+h[f].name+"<\/option>");g+="<\/select>",k[y]=g}w=k[y],b=n.resmangeltildelinger[t.eventresmangler[u].index],b>-2&&(w=w.replace("'"+b+"'","'"+b+"' selected")),tt=t.eventtidmangler[i]!=undefined?t.eventtidmangler[i].index:-(t.preasigntime.index+i)-1,e+="<td> "+ut+":<select data-eventindex="+t.index+"  data-durationindex="+i+"  data-tidmangelindex="+tt+" onchange='choicemade(false,"+t.eventresmangler[u].index+",this)'>>"+w+"<\/td>"}}return e+"<\/table>"}var timer,vistsol,tidsgrupper,resourcetyper,resourcegrupper,resourcer,eventgrupper,events,antalevents,antalresourcer,antaltider,hardconstraints,softconstraints,resmangler,tidmangler,counter=0,xmlDoc,xmlinstans;window.onload=function(){var n,i,t;if([][3]=[5],n=["DenmarkSmallSchool","test","NetherlandsKottenpark2009","ArtificialORLibrary-hdtt6","ArtificialSudoku4x4","AustraliaBGHS98","AustraliaSAHS96","BrazilInstance1","BrazilInstance4","DenmarkHasserisGymnasium2012","EnglandStPaul","GreeceHighSchool1","FinlandCollege","FinlandSecondarySchool","NetherlandsGEPRO","SouthAfricaLewitt2009","SpainSchool","ItalyInstance1"],i=0,i)for(t=0;t<n.length;t++)events=[],instans.readxml("XML/"+n[t]+".xml");instans.readxml("XML/"+n[6]+".xml"),vistsol=new solution.Sol,$("#content").html(lavtablerowhtml(vistsol))}