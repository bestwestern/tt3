function lavxml(){var r=new XMLSerializer,u=xmlDoc.getElementsByTagName("Instances")[0],n,i,t;xmlDoc.documentElement.removeChild(u),n=xmlDoc.createElement("SolutionGroup"),n.setAttribute("Id","Runessol"),i=xmlDoc.createElement("Solution"),i.setAttribute("Reference",xmlinstans),addnode("Events",i),t=xmlDoc.createElement("MetaData"),addnode("Contributor",t,"run@sdu.dk"),addnode("Date",t,(new Date).toDateString()),addnode("Description",t,"Speciale"),n.appendChild(t),n.appendChild(i),xmlDoc.documentElement.appendChild(n),window.open("data:text/xml,"+r.serializeToString(xmlDoc))}function addnode(n,t,i){var u=xmlDoc.createElement(n),r;i&&(r=xmlDoc.createTextNode("ch"),r.nodeValue=i,u.appendChild(r)),t.appendChild(u)}function choicemade(n,t,i){var r,u;r=n?vistsol.tidtildelinger:vistsol.restildelinger,u=Number(i.options[i.selectedIndex].value),r[t]=isNaN(u)?null:u,lavtablerowhtml(vistsol),vistsol.udregnhard()}function assert(n,t){var i=document.getElementById("results"),r;i||(i=document.createElement("ul"),document.getElementsByTagName("body")[0].appendChild(i),i.setAttribute("id","results")),r=document.createElement("li"),r.className=n?"pass":"fail",r.appendChild(document.createTextNode(t)),i.appendChild(r)}function lavtablerowhtml(n){for(var e="<table><thead><tr><td>Event<\/td><td>Time<\/td><\/tr><\/thead>",k={},st=events.length,d=" <option> Not chosen<\/option> ",t,tt,r,c,s,l,it,a,v,u,rt,y,p,et,h,f,ot,nt,w,b,i=0,o=timer.length;i<o;i++)d+="<option value='"+timer[i].index+"'>"+timer[i].name+"<\/option>";for(d+="<\/select>",i=0;i<st;i++)for(t=events[i],tt=t.eventresmangler.length,r=0;r<t.duration;r++){for(c=t.name,s="",t.duration>1&&(c+=" ("+(r+1)+"/"+t.duration+")"),l=0,o=t.eventresourcer.length;l<o;l++)s+=t.eventresourcer[l].name+", ";for(e+=s.length>0?"<tr title='"+s.substr(0,s.length-2)+"'><td>":"<tr><td>",t.preasigntime?(it=timer[t.preasigntime.index+r],e+=c+"<\/td><td>Time:"+it.name+"<\/td>"):(a=d,v=n.tidtildelinger[t.eventtidmangler[r].index],v>-2&&(a=a.replace("'"+v+"'","'"+v+"' selected")),e+=c+"<\/td><td>Time:<select onchange='choicemade(true,"+t.eventtidmangler[r].index+",this)'>"+a+"<\/td>"),u=r;u<tt;u=u+t.duration){if(rt=t.eventresmangler[u].role,y=t.eventresmangler[u].resourcetype.id,k[y]===undefined){var ut=[],g="<option>Not chosen<\/option>",ft=t.eventresmangler[u].resourcetype.resourcegroups;for(p=0,et=ft.length;p<et;p++)for(h=ft[p].resourcer,f=0,ot=h.length;f<ot;f++)ut.indexOf(h[f].index)==-1&&(nt=h[f].index,ut.push(nt),g+="<option value='"+nt+"'>"+h[f].name+"<\/option>");g+="<\/select>",k[y]=g}w=k[y],b=n.restildelinger[t.eventresmangler[r].index],b>-2&&(w=w.replace("'"+b+"'","'"+b+"' selected")),e+="<td> "+rt+":<select onchange='choicemade(false,"+t.eventresmangler[r].index+",this)'>>"+w+"<\/td>"}}return e+"<\/table>"}var timer,vistsol,tidsgrupper,resourcetyper,resourcegrupper,resourcer,eventgrupper,events,hardconstraints,softconstraints,resmangler,tidmangler,counter=0,xmlDoc,xmlinstans;window.onload=function(){instans.readxml("XML/"+["test","NetherlandsKottenpark2009","ArtificialORLibrary-hdtt6","ArtificialSudoku4x4","AustraliaBGHS98","AustraliaSAHS96","BrazilInstance1","BrazilInstance4","DenmarkHasserisGymnasium2012","EnglandStPaul","GreeceHighSchool1","FinlandCollege","FinlandSecondarySchool","NetherlandsGEPRO","SouthAfricaLewitt2009","SpainSchool","ItalyInstance1"][16]+".xml"),lavxml()}