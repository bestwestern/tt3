var solution;(function(n){var i=function(){function n(){this.durationindex=[],this.eventindex=[]}return n}(),t,r;n.tildeling=i,t=function(){function n(){this.tider=[];for(var n=0;n<antaltider;n++)this.tider.push(new i)}return n}(),n.restider=t,r=function(){function n(){var n,i,r,u,f;for(this.resmangeltildelinger=[],this.tidmangeltildelinger=[],this.restiltid=[],n=0;n<antalresourcer;n++)this.restiltid[n]=new t;for(n=0;n<antalevents;n++)if(i=events[n],i.preasigntime)for(r=0;r<i.duration;r++)for(u=0;u<i.eventresourcer.length;u++)f=i.eventresourcer[u].index,this.restiltid[f].tider[i.preasigntime.index+r].durationindex.push(r),this.restiltid[f].tider[i.preasigntime.index+r].eventindex.push(i.index)}return n.prototype.udregncon=function(n){for(var w=n?hardconstraints:softconstraints,c,l,a,s,t,f,r,o,u,v,y,p,i,h=0,b=w.length;h<b;h++){var t=w[h],e=[],k=0;if(t instanceof instans.AssignResourceConstraint)for(t=t,i=0,f=t.appliestoev.length;i<f;i++){for(r=0,c=t.appliestoev[i].eventresmangler,u=0;u<c.length;u++)this.resmangeltildelinger[c[u].index]==null&&r++;e.push(r)}if(t instanceof instans.AssignTimeConstraint)for(t=t,i=0,f=t.appliestoev.length;i<f;i++){for(r=0,o=t.appliestoev[i].eventtidmangler,u=0;u<o.length;u++)this.tidmangeltildelinger[o[u].index]==null&&r++;e.push(r)}if(t instanceof instans.AvoidClashesConstraint)for(t=t,i=0;i<t.appliestores.length;i++){for(l=0,a=t.appliestores[i].index,s=0;s<antaltider;s++)this.restiltid[a].tider[s].durationindex.length>1&&(l+=this.restiltid[a].tider[s].durationindex.length-1);e.push(l)}if(t instanceof instans.SplitEventsConstraint)for(t=t,i=0,f=t.appliestoev.length;i<f;i++)r=this.getspliteventafvigelse(t.appliestoev[i],t),r>0&&e.push(r);if(t instanceof instans.PreferTimesConstraint)for(t=t,i=0,f=t.appliestoev.length;i<f;i++){for(r=0,o=t.appliestoev[i].eventtidmangler,u=0;u<o.length;u++)v=this.tidmangeltildelinger[o[u].index],v!=null&&t.timer.indexOf(timer[v])<0&&r++;e.push(r)}e.length>0&&(y=document.createElement("li"),k=t.costfunction(e)*t.weight,y.appendChild(document.createTextNode(t.name+":"+k.toString()+":"+e.toString())),p=n?document.getElementById("hardcon"):document.getElementById("softcon"),p.insertBefore(y,p.firstChild))}if(e)for(i=0;i<e.length;i++);},n.prototype.getspliteventafvigelse=function(n,t){for(var y=t.minimumduration,l=t.minimumamount,p=t.maximumduration,a=t.maximumamount,h=!0,i=0,v=n.eventtidmangler.length,r=[],o,u,c,f,s,e;h;)if(this.tidmangeltildelinger[n.eventtidmangler[i].index]!=null){for(r.push(i),o=!0;o;)i+2>v?(o=!1,h=!1):this.tidmangeltildelinger[n.eventtidmangler[i+1].index]!=null?this.tidmangeltildelinger[n.eventtidmangler[i].index]+1==this.tidmangeltildelinger[n.eventtidmangler[i+1].index]?i++:o=!1:o=!1;r.push(i++)}else i+2>v?h=!1:i++;if(u=0,r.length>0){for(c=n.name,f=0;f<r.length;f=f+2)s=r[f+1]-r[f]+1,c+=" længde:"+s.toString(),s<y&&u++,s>p&&u++;e=r.length/2,e>a&&u+e-a,e<l&&u+l-e,c+=" antal:"+e.toString()}return u},n.prototype.tildeltidtilevent=function(n,t){var i=tidmangler[n].aevent,o=i.index,f=tidmangler[n].durationindex,e,u,s,r;for(this.tidmangeltildelinger[n]!=undefined&&(e=this.tidmangeltildelinger[n]),u=f;u<i.eventresmangler.length;u=u+i.duration)for(this.resmangeltildelinger[i.eventresmangler[u].index]!==undefined&&(r=this.resmangeltildelinger[i.eventresmangler[u].index],e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o)),s=0;s<i.eventresourcer.length;s++)r=i.eventresourcer[s].index,e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o);this.tidmangeltildelinger[n]=t>-1?t:null},n.prototype.fratagresourcetileventtiltid=function(n,t,i,r){for(var f=this.restiltid[n].tider[i],e=-1,u=0;u<f.durationindex.length;u++)f.durationindex[u]==t&&f.eventindex[u]==r&&(e=u);e>-1&&(f.eventindex.splice(e,1),f.durationindex.splice(e,1))},n.prototype.tildelresourcetileventtiltid=function(n,t,i,r){var u=this.restiltid[n].tider[i];u.eventindex.push(r),u.durationindex.push(t)},n}(),n.Sol=r})(solution||(solution={}))