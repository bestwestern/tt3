var solution;(function(n){var i=function(){function n(){this.durationindex=[],this.eventindex=[]}return n}(),t,r;n.tildeling=i,t=function(){function n(){this.tider=[];for(var n=0;n<antaltider;n++)this.tider.push(new i)}return n}(),n.restider=t,r=function(){function n(){var n,i,r,u,f;for(this.resmangeltildelinger=[],this.tidmangeltildelinger=[],this.restiltid=[],n=0;n<antalresourcer;n++)this.restiltid[n]=new t;for(n=0;n<antalevents;n++)if(i=events[n],i.preasigntime)for(r=0;r<i.duration;r++)for(u=0;u<i.eventresourcer.length;u++)f=i.eventresourcer[u].index,this.restiltid[f].tider[i.preasigntime.index+r].durationindex.push(r),this.restiltid[f].tider[i.preasigntime.index+r].eventindex.push(i.index)}return n.prototype.udregncon=function(n){for(var at=n?hardconstraints:softconstraints,c={},l,nt,tt,it,a,u,v,b,yt,rt,f,ut,ft,g,et,y,bt,t,i,o,r,ot,wt,st,ht,ct,lt,p=0,vt=at.length;p<vt;p++){var t=at[p],e=[],w=0,s="";if(t instanceof instans.AssignResourceConstraint)for(s="AssignResourceConstraint",t=t,l=t.appliestoresmangler,i=0;i<l.length;i++)u=0,this.resmangeltildelinger[l[i].index]==null&&(l[i].aevent.preasigntime?u+=l[i].aevent.duration:u++),e.push(u);if(t instanceof instans.AssignTimeConstraint)for(s="AssignTimeConstraint",t=t,i=0,o=t.appliestoev.length;i<o;i++){for(u=0,nt=t.appliestoev[i].eventtidmangler,f=0;f<nt.length;f++)this.tidmangeltildelinger[nt[f].index]==null&&u++;e.push(u)}if(t instanceof instans.DistributeSplitEventsConstraint)for(s="DistributeSplitEventsConstraint",t=t,i=0,o=t.appliestoev.length;i<o;i++)u=this.getdistributespliteventafvigelse(t.appliestoev[i],t),u>0&&e.push(u);if(t instanceof instans.AvoidClashesConstraint)for(t=t,s="AvoidClashesConstraint",i=0;i<t.appliestores.length;i++){for(tt=0,it=t.appliestores[i].index,a=0;a<antaltider;a++)this.restiltid[it].tider[a].durationindex.length>1&&(tt+=this.restiltid[it].tider[a].durationindex.length-1);e.push(tt)}if(t instanceof instans.SplitEventsConstraint)for(s="SplitEventsConstraint",t=t,i=0,o=t.appliestoev.length;i<o;i++)u=this.getspliteventafvigelse(t.appliestoev[i],t),u>0&&e.push(u);if(t instanceof instans.SpreadEventsConstraint){for(s="SpreadEventsConstraint",t=t,v=[],i=0;i<b;i++)v.push(0);for(b=t.timegroupminimum.length,i=0,yt=t.appliestoevgrou.length;i<yt;i++){for(rt=t.appliestoevgrou[i],f=0;f<b;f++)v[f]=0;for(f=0;f<rt.events.length;f++){var k=[],d=rt.events[f];if(d.preasigntime)k.push(d.preasigntime);else for(ut=this.getdurations(d),r=0;r<ut.length;r=r+2)k.push(timer[this.tidmangeltildelinger[d.eventtidmangler[ut[r]].index]]);for(r=0;r<k.length;r++)for(ft=k[r],g=0;g<ft.timegroups.length;g++)et=t.timegroups.indexOf(ft.timegroups[g]),et>-1&&v[et]++;for(r=0;r<b;r++)y=v[r],y<t.timegroupminimum[r]?e.push(t.timegroupminimum[r]-y):y>t.timegroupmaximum[r]&&e.push(y-t.timegroupmaximum[r])}}}if(t instanceof instans.PreferTimesConstraint)for(s="PreferTimesConstraint",bt=t.duration,t=t,i=0,o=t.appliestoev.length;i<o;i++){var u=0,pt=t.appliestoev[i],h=this.getdurations(pt);for(r=0;r<h.length;r=r+2)ot=!0,"duration"in t&&(ot=h[r+1]-h[r]+1==t.duration),ot&&(wt=pt.eventtidmangler[h[r]].index,st=this.tidmangeltildelinger[wt],st!=null&&t.timer.indexOf(timer[st])<0&&(u=u+h[r+1]-h[r]+1));e.push(u)}e.length>0&&(ht=document.createElement("li"),w=t.costfunction(e)*t.weight,ht.appendChild(document.createTextNode(t.id+":"+w.toString()+":"+e.toString())),ct=n?document.getElementById("hardcon"):document.getElementById("softcon"),ct.insertBefore(ht,ct.firstChild),s in c?c[s]+=w:c[s]=w)}assert(!0,"-----------");for(lt in c)assert(!0,lt+" "+c[lt])},n.prototype.getdurations=function(n){for(var f=[],e=!0,t=0,o=n.eventtidmangler.length,i,u,r,s,h;e;)if(this.tidmangeltildelinger[n.eventtidmangler[t].index]!=null){for(f.push(t),i=!0;i;)if(t+2>o)i=!1,e=!1;else if(this.tidmangeltildelinger[n.eventtidmangler[t+1].index]!=null)if(this.tidmangeltildelinger[n.eventtidmangler[t].index]+1==this.tidmangeltildelinger[n.eventtidmangler[t+1].index]){for(u=!1,r=t+1;r<n.eventresmangler.length;r+=n.duration)s=vistsol.resmangeltildelinger[n.eventresmangler[r].index],h=vistsol.resmangeltildelinger[n.eventresmangler[r-1].index],s==h?u=!0:(u=!1,r=n.eventresmangler.length);u||n.eventresmangler.length==0?t++:i=!1}else i=!1;else i=!1;f.push(t++)}else t+2>o?e=!1:t++;return f},n.prototype.getspliteventafvigelse=function(n,t){var h=t.minimumduration,o=t.minimumamount,l=n.id,c=t.maximumduration,s=t.maximumamount,r=this.getdurations(n),u=0,i,e,f;if(r.length>0){for(i=0;i<r.length;i=i+2)e=r[i+1]-r[i]+1,e<h&&u++,e>c&&u++;f=r.length/2,f>s&&(u+=f-s),f<o&&(u+=o-f)}return u},n.prototype.getdistributespliteventafvigelse=function(n,t){var f=t.minimum,s=n.id,e=t.maximum,o=t.duration,u=this.getdurations(n),i,r;if(u.length>0)for(i=0,r=0;r<u.length;r=r+2)u[r+1]-u[r]+1==o&&i++;return i>e?i-e:i<f?f-i:0},n.prototype.randomtidtildel=function(n){for(var i,r,t=0;t<n;t++)i=Math.floor(Math.random()*tidmangler.length),r=Math.floor(Math.random()*antaltider),this.tildeltidtilevent(i,r)},n.prototype.randontildelres=function(n){for(var t,s,i=0;i<n;i++)if(t=Math.floor(Math.random()*resmangler.length),this.resmangeltildelinger[t]==undefined){var r=resmangler[t].resourcetype,f=Math.floor(Math.random()*r.resourcegroups.length),u=r.resourcegroups[f].resourcer,e=Math.floor(Math.random()*u.length),o=u[e].index;vistsol.resmangeltildelinger[t]=o}else s=3},n.prototype.tildeltidtilevent=function(n,t){var i=tidmangler[n].aevent,o=i.index,f=tidmangler[n].durationindex,e,u,s,r;for(this.tidmangeltildelinger[n]!=undefined&&(e=this.tidmangeltildelinger[n]),u=f;u<i.eventresmangler.length;u=u+i.duration)this.resmangeltildelinger[i.eventresmangler[u].index]!==undefined&&(r=this.resmangeltildelinger[i.eventresmangler[u].index],e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o));for(s=0;s<i.eventresourcer.length;s++)r=i.eventresourcer[s].index,e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o);this.tidmangeltildelinger[n]=t>-1?t:null},n.prototype.fratagresourcetileventtiltid=function(n,t,i,r){for(var f=this.restiltid[n].tider[i],e=-1,u=0;u<f.durationindex.length;u++)f.durationindex[u]==t&&f.eventindex[u]==r&&(e=u);e>-1&&(f.eventindex.splice(e,1),f.durationindex.splice(e,1))},n.prototype.tildelresourcetileventtiltid=function(n,t,i,r){var u=this.restiltid[n].tider[i];u.eventindex.push(r),u.durationindex.push(t)},n}(),n.Sol=r})(solution||(solution={}))