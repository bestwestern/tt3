var solution;(function(n){var i=function(){function n(){this.durationindex=[],this.eventindex=[]}return n}(),t,r;n.tildeling=i,t=function(){function n(){this.tider=[];for(var n=0;n<antaltider;n++)this.tider.push(new i)}return n}(),n.restider=t,r=function(){function n(){var n,i,r,u,f;for(this.resmangeltildelinger=[],this.tidmangeltildelinger=[],this.restiltid=[],n=0;n<antalresourcer;n++)this.restiltid[n]=new t;for(n=0;n<antalevents;n++)if(i=events[n],i.preasigntime)for(r=0;r<i.duration;r++)for(u=0;u<i.eventresourcer.length;u++)f=i.eventresourcer[u].index,this.restiltid[f].tider[i.preasigntime.index+r].durationindex.push(r),this.restiltid[f].tider[i.preasigntime.index+r].eventindex.push(i.index)}return n.prototype.udregncon=function(n){for(var ut=n?hardconstraints:softconstraints,l={},a,h,b,v,c,k,y,et,ot,d,g,t,i,o,r,s,u,nt,tt,it,rt,p=0,ft=ut.length;p<ft;p++){var t=ut[p],f=[],w=0,e="";if(t instanceof instans.AssignResourceConstraint)for(e="AssignResourceConstraint",t=t,a=t.appliestoresmangler,i=0;i<a.length;i++)r=0,this.resmangeltildelinger[a[i].index]==null&&(a[i].aevent.preasigntime?r+=a[i].aevent.duration:r++),f.push(r);if(t instanceof instans.AssignTimeConstraint)for(e="AssignTimeConstraint",t=t,i=0,o=t.appliestoev.length;i<o;i++){for(r=0,s=t.appliestoev[i].eventtidmangler,u=0;u<s.length;u++)this.tidmangeltildelinger[s[u].index]==null&&r++;f.push(r)}if(t instanceof instans.AvoidClashesConstraint)for(t=t,e="AvoidClashesConstraint",h=[],i=0;i<t.appliestores.length;i++){for(b=0,v=t.appliestores[i].index,c=0;c<antaltider;c++)if(this.restiltid[v].tider[c].durationindex.length>1)for(b+=this.restiltid[v].tider[c].durationindex.length-1,h.push([]),k=this.restiltid[v].tider[c],y=0;y<k.eventindex.length;y++)h[h.length-1].push(events[k.eventindex[y]].name+":"+k.durationindex[y]+"<br>");if(et=t.appliestores[i].name+" "+b.toString(),v==2)for(ot=h[0],d=h[2],assert(1,d.toString()),g=0;g<d.length;g++);f.push(b)}if(t instanceof instans.SplitEventsConstraint)for(e="SplitEventsConstraint",t=t,i=0,o=t.appliestoev.length;i<o;i++)r=this.getspliteventafvigelse(t.appliestoev[i],t),r>0&&f.push(r);if(t instanceof instans.PreferTimesConstraint)for(e="PreferTimesConstraint",t=t,i=0,o=t.appliestoev.length;i<o;i++){for(r=0,s=t.appliestoev[i].eventtidmangler,u=0;u<s.length;u++)nt=this.tidmangeltildelinger[s[u].index],nt!=null&&t.timer.indexOf(timer[nt])<0&&r++;f.push(r)}f.length>0&&(tt=document.createElement("li"),w=t.costfunction(f)*t.weight,tt.appendChild(document.createTextNode(t.id+":"+w.toString()+":"+f.toString())),it=n?document.getElementById("hardcon"):document.getElementById("softcon"),it.insertBefore(tt,it.firstChild),e in l?l[e]+=w:l[e]=w)}for(rt in l)assert(!0,rt+" "+l[rt])},n.prototype.getspliteventafvigelse=function(n,t){for(var k=t.minimumduration,v=t.minimumamount,d=t.maximumduration,y=t.maximumamount,l=!0,i=0,p=n.eventtidmangler.length,r=[],u,h,f,w,b,e,a,o,c,s;l;)if(this.tidmangeltildelinger[n.eventtidmangler[i].index]!=null){for(r.push(i),u=!0;u;)if(i+2>p)u=!1,l=!1;else if(this.tidmangeltildelinger[n.eventtidmangler[i+1].index]!=null)if(this.tidmangeltildelinger[n.eventtidmangler[i].index]+1==this.tidmangeltildelinger[n.eventtidmangler[i+1].index]){for(h=!1,f=i+1;f<n.eventresmangler.length;f+=n.duration)w=vistsol.resmangeltildelinger[n.eventresmangler[f].index],b=vistsol.resmangeltildelinger[n.eventresmangler[f-1].index],w==b?h=!0:(h=!1,f=n.eventresmangler.length);h||n.eventresmangler.length==0?i++:u=!1}else u=!1;else u=!1;r.push(i++)}else i+2>p?l=!1:i++;if(e=0,r.length>0){for(a=n.name,o=0;o<r.length;o=o+2)c=r[o+1]-r[o]+1,a+=" længde:"+c.toString(),c<k&&e++,c>d&&e++;s=r.length/2,s>y&&(e+=s-y),s<v&&(e+=v-s),a+=" antal:"+s.toString()}return e},n.prototype.tildeltidtilevent=function(n,t){var i=tidmangler[n].aevent,o=i.index,f=tidmangler[n].durationindex,e,u,s,r;for(this.tidmangeltildelinger[n]!=undefined&&(e=this.tidmangeltildelinger[n]),u=f;u<i.eventresmangler.length;u=u+i.duration)for(this.resmangeltildelinger[i.eventresmangler[u].index]!==undefined&&(r=this.resmangeltildelinger[i.eventresmangler[u].index],e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o)),s=0;s<i.eventresourcer.length;s++)r=i.eventresourcer[s].index,e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o);this.tidmangeltildelinger[n]=t>-1?t:null},n.prototype.fratagresourcetileventtiltid=function(n,t,i,r){for(var f=this.restiltid[n].tider[i],e=-1,u=0;u<f.durationindex.length;u++)f.durationindex[u]==t&&f.eventindex[u]==r&&(e=u);e>-1&&(f.eventindex.splice(e,1),f.durationindex.splice(e,1))},n.prototype.tildelresourcetileventtiltid=function(n,t,i,r){var u=this.restiltid[n].tider[i];u.eventindex.push(r),u.durationindex.push(t)},n}(),n.Sol=r})(solution||(solution={}))