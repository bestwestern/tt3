var solution;(function(n){var i=function(){function n(){this.durationindex=[],this.eventindex=[]}return n}(),t,r;n.tildeling=i,t=function(){function n(){this.tider=[];for(var n=0;n<antaltider;n++)this.tider.push(new i)}return n}(),n.restider=t,r=function(){function n(){var n,i,r,u,f;for(this.resmangeltildelinger=[],this.tidmangeltildelinger=[],this.restiltid=[],n=0;n<antalresourcer;n++)this.restiltid[n]=new t;for(n=0;n<antalevents;n++)if(i=events[n],i.preasigntime)for(r=0;r<i.duration;r++)for(u=0;u<i.eventresourcer.length;u++)f=i.eventresourcer[u].index,this.restiltid[f].tider[i.preasigntime.index+r].durationindex.push(r),this.restiltid[f].tider[i.preasigntime.index+r].eventindex.push(i.index)}return n.prototype.udregncon=function(n){"use strict";var ai={},ht,yi,wt,bt,kt,nt,tr,dt,gt,tt,v,y,p,ti,ii,ri,w,a,ki,s,e,c,fr,t,h,fi,gi,ei,vt,i,nr,l,et,u,ot,er,oi,si,yt,hi,r,st,ci,li,k;Object.defineProperty(ai,"x",{value:42,writable:!1}),ai.xty=4;var vi=n?hardconstraints:softconstraints,d={},g={};for(ht=0,yi=vi.length;ht<yi;ht++){var t=vi[ht],f=[],ct=0,o="";if(t instanceof instans.AssignResourceConstraint){o="AssignResourceConstraint";var t=t,s=t.appliestoresmangler;for(i=0;i<s.length;i++){var pt=t.id+"__"+s[i].aevent.name,or=s[i].aevent,sr=s[i];this.resmangeltildelinger[s[i].index]==null&&(s[i].aevent.preasigntime?f.push(s[i].aevent.duration):f.push(1),a=f[f.length-1],g[pt]?g[pt]+=f[f.length-1]:g[pt]=f[f.length-1],r=4)}}if(t instanceof instans.AssignTimeConstraint)for(o="AssignTimeConstraint",t=t,i=0,h=t.appliestoev.length;i<h;i++){for(e=0,wt=t.appliestoev[i].eventtidmangler,u=0;u<wt.length;u++)this.tidmangeltildelinger[wt[u].index]==null&&e++;f.push(e)}if(t instanceof instans.AvoidSplitAssignmentsConstraint)for(o="AvoidSplitAssignmentsConstraint",t=t,bt=t.arraymedarrayafresmangler,i=0;i<bt.length;i++){for(kt=bt[i],nt=[],u=0;u<kt.length;u++)c=this.resmangeltildelinger[kt[u].index],c!=undefined?nt.indexOf(c)==-1&&nt.push(c):tr=3;nt.length>1&&f.push(nt.length-1)}if(t instanceof instans.AvoidClashesConstraint)for(t=t,o="AvoidClashesConstraint",i=0;i<t.appliestores.length;i++){for(dt=0,gt=t.appliestores[i].index,tt=0;tt<antaltider;tt++)this.restiltid[gt].tider[tt].durationindex.length>1&&(dt+=this.restiltid[gt].tider[tt].durationindex.length-1);f.push(dt)}if(t instanceof instans.DistributeSplitEventsConstraint)for(o="DistributeSplitEventsConstraint",t=t,i=0,h=t.appliestoev.length;i<h;i++)e=this.getdistributespliteventafvigelse(t.appliestoev[i],t),e>0&&f.push(e);if(t instanceof instans.AvoidUnavailableTimesConstraint){o="AvoidUnavailableTimesConstraint";var pi=t.timer,ir=pi.length,t=t;for(i=0;i<t.appliestores.length;i++){var v=t.appliestores[i],ni=0,y=this.restiltid[v.index];for(u=0;u<ir;u++)y.tider[pi[u].index].eventindex.length>0&&ni++;ni&&f.push(ni)}}if(t instanceof instans.LimitBusyTimesConstraint){o="LimitBusyTimesConstraint";var wi=t.timegroups,rr=wi.length,it=t.maximum,rt=t.minimum,t=t;for(i=0;i<t.appliestores.length;i++)for(v=t.appliestores[i],y=this.restiltid[v.index],u=0;u<rr;u++){for(p=0,ti=wi[u].timer,r=0;r<ti.length;r++)y.tider[ti[r].index].eventindex.length>0&&p++;p>it?f.push(p-it):p<rt&&f.push(rt-p)}}if(t instanceof instans.LimitWorkloadConstraint){o="LimitWorkloadConstraint ";var t=t,it=t.maximum,rt=t.minimum;for(i=0;i<t.appliestores.length;i++){var v=t.appliestores[i],ut=0,y=this.restiltid[v.index];for(u=0;u<antaltider;u++)for(ii=y.tider[u],r=0;r<ii.eventindex.length;r++)ut+=events[ii.eventindex[r]].workload||1;ut>it?f.push(ut-it):ut<rt&&f.push(rt-ut)}}if(t instanceof instans.LinkEventsConstraint)for(o="LinkEventsConstraint ",t=t,ri=t.appliestoevgrou,i=0;i<ri.length;i++){var l=ri[i],hr=l.events[0].duration,lt=[],ft=[];for(u=0;u<l.events.length;u++){var ur=l.events[u],ui=[],bi=ur.eventtidmangler;for(r=0;r<bi.length;r++)w=this.tidmangeltildelinger[bi[r].index],w!=null&&(ui.indexOf(w)==-1&&ui.push(w),lt.indexOf(w)==-1&&lt.push(w));ft.push(ui)}for(a=0,u=0;u<lt.length;u++){for(ki=lt[u],r=0;r<ft.length;r++)ft[r].indexOf(ki)==-1&&(r=ft.length+1);r>ft.length&&a++}a&&f.push(a)}if(t instanceof instans.SplitEventsConstraint)for(o="SplitEventsConstraint",t=t,i=0,h=t.appliestoev.length;i<h;i++)e=this.getspliteventafvigelse(t.appliestoev[i],t),e>0&&f.push(e);if(t instanceof instans.PreferResourcesConstraint)for(o="PreferResourcesConstraint",t=t,s=t.appliestoresmangler,i=0;i<s.length;i++)e=0,c=this.resmangeltildelinger[s[i].index],c!=undefined&&t.appliestores.indexOf(resourcer[c])<0&&(s[i].aevent.preasigntime?e+=s[i].aevent.duration:e++),f.push(e);if(t instanceof instans.PreferTimesConstraint)for(o="PreferTimesConstraint",fr=t.duration,t=t,i=0,h=t.appliestoev.length;i<h;i++){var e=0,di=t.appliestoev[i],b=this.getdurations(di);for(r=0;r<b.length;r=r+2)fi=!0,"duration"in t&&(fi=b[r+1]-b[r]+1==t.duration),fi&&(gi=di.eventtidmangler[b[r]].index,ei=this.tidmangeltildelinger[gi],ei!=null&&t.timer.indexOf(timer[ei])<0&&(e=e+b[r+1]-b[r]+1));f.push(e)}if(t instanceof instans.SpreadEventsConstraint){o="SpreadEventsConstraint";var t=t,at=[];for(i=0;i<vt;i++)at.push(0);for(vt=t.timegroupminimum.length,i=0,nr=t.appliestoevgrou.length;i<nr;i++){for(l=t.appliestoevgrou[i],u=0;u<vt;u++)at[u]=0;for(et=[],u=0;u<l.events.length;u++)if(ot=l.events[u],er=[],ot.preasigntime)et.push(ot.preasigntime);else for(oi=this.getdurations(ot),r=0;r<oi.length;r=r+2)et.push(timer[this.tidmangeltildelinger[ot.eventtidmangler[oi[r]].index]]);for(r=0;r<et.length;r++)for(si=et[r],yt=0;yt<si.timegroups.length;yt++)hi=t.timegroups.indexOf(si.timegroups[yt]),hi>-1&&at[hi]++;for(r=0;r<vt;r++)st=at[r],st<t.timegroupminimum[r]?f.push(t.timegroupminimum[r]-st):st>t.timegroupmaximum[r]&&f.push(st-t.timegroupmaximum[r])}}f.length>0&&(ci=document.createElement("li"),ct=t.costfunction(f)*t.weight,ci.appendChild(document.createTextNode(t.id+":"+ct.toString()+":"+f.toString())),li=n?document.getElementById("hardcon"):document.getElementById("softcon"),li.insertBefore(ci,li.firstChild),o in d?d[o]+=ct:d[o]=ct)}assert(!0,"-----------");for(k in d)assert(!0,k+" "+d[k]);for(k in g)assert(!0,k+" : "+g[k])},n.prototype.getdurations=function(n){for(var f=[],e=!0,t=0,o=n.eventtidmangler.length,i,u,r,s,h;e;)if(this.tidmangeltildelinger[n.eventtidmangler[t].index]!=null){for(f.push(t),i=!0;i;)if(t+2>o)i=!1,e=!1;else if(this.tidmangeltildelinger[n.eventtidmangler[t+1].index]!=null)if(this.tidmangeltildelinger[n.eventtidmangler[t].index]+1==this.tidmangeltildelinger[n.eventtidmangler[t+1].index]){for(u=!1,r=t+1;r<n.eventresmangler.length;r+=n.duration)s=vistsol.resmangeltildelinger[n.eventresmangler[r].index],h=vistsol.resmangeltildelinger[n.eventresmangler[r-1].index],s==h?u=!0:(u=!1,r=n.eventresmangler.length);u||n.eventresmangler.length==0?t++:i=!1}else i=!1;else i=!1;f.push(t++)}else t+2>o?e=!1:t++;return f},n.prototype.getspliteventafvigelse=function(n,t){var h=t.minimumduration,o=t.minimumamount,l=n.id,c=t.maximumduration,s=t.maximumamount,r=this.getdurations(n),u=0,i,e,f;if(r.length>0){for(i=0;i<r.length;i=i+2)e=r[i+1]-r[i]+1,e<h&&u++,e>c&&u++;f=r.length/2,f>s&&(u+=f-s),f<o&&(u+=o-f)}return u},n.prototype.getdistributespliteventafvigelse=function(n,t){var f=t.minimum,s=n.id,e=t.maximum,o=t.duration,u=this.getdurations(n),i,r;if(u.length>0)for(i=0,r=0;r<u.length;r=r+2)u[r+1]-u[r]+1==o&&i++;return i>e?i-e:i<f?f-i:0},n.prototype.randomtidtildel=function(n){for(var i,r,t=0;t<n;t++)i=Math.floor(Math.random()*tidmangler.length),r=Math.floor(Math.random()*antaltider),this.tildeltidtilevent(i,r)},n.prototype.randontildelres=function(n){for(var t,i,r,u,c,f=0;f<n;f++)if(t=Math.floor(Math.random()*resmangler.length),this.resmangeltildelinger[t]==undefined){for(i=-1;i<0;){var o=resmangler[t].resourcetype,h=Math.floor(Math.random()*o.resourcegroups.length),e=o.resourcegroups[h].resourcer,s=Math.floor(Math.random()*e.length);e[s]&&(i=e[s].index)}if(vistsol.resmangeltildelinger[t]=i,resmangler[t].aevent.preasigntime)for(r=resmangler[t].aevent,u=0;u<r.duration;u++)vistsol.tildelresourcetileventtiltid(i,0,r.preasigntime.index+u,r.index)}else c=3},n.prototype.tildeltidtilevent=function(n,t){var i=tidmangler[n].aevent,o=i.index,f=tidmangler[n].durationindex,e,u,s,r;for(this.tidmangeltildelinger[n]!=undefined&&(e=this.tidmangeltildelinger[n]),u=f;u<i.eventresmangler.length;u=u+i.duration)this.resmangeltildelinger[i.eventresmangler[u].index]!==undefined&&(r=this.resmangeltildelinger[i.eventresmangler[u].index],e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o));for(s=0;s<i.eventresourcer.length;s++)r=i.eventresourcer[s].index,e!==undefined&&this.fratagresourcetileventtiltid(r,f,e,o),t>-1&&this.tildelresourcetileventtiltid(r,f,t,o);this.tidmangeltildelinger[n]=t>-1?t:null},n.prototype.fratagresourcetileventtiltid=function(n,t,i,r){for(var f=this.restiltid[n].tider[i],e=-1,u=0;u<f.durationindex.length;u++)f.durationindex[u]==t&&f.eventindex[u]==r&&(e=u);e>-1&&(f.eventindex.splice(e,1),f.durationindex.splice(e,1))},n.prototype.tildelresourcetileventtiltid=function(n,t,i,r){var u=this.restiltid[n].tider[i];u.eventindex.push(r),u.durationindex.push(t)},n}(),n.Sol=r})(solution||(solution={}))